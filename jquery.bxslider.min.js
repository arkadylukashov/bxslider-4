/**
 * BxSlider v4.0 - Fully loaded, responsive content slider
 * http://bxslider.com
 *
 * Copyright 2012, Steven Wanderski - http://stevenwanderski.com - http://bxcreative.com
 * Written while drinking Belgian ales and listening to jazz
 *
 * Released under the WTFPL license - http://sam.zoy.org/wtfpl/
 */
(function(e){var t={mode:"horizontal",slideSelector:"",infiniteLoop:true,hideControlOnEnd:false,speed:500,easing:null,slideMargin:0,startSlide:0,captions:false,captionsSelector:false,captionsAttr:"alt",ticker:false,tickerHover:false,adaptiveHeight:false,adaptiveHeightSpeed:500,touchEnabled:true,swipeThreshold:50,video:false,useCSS:true,pager:true,pagerType:"full",pagerShortSeparator:" / ",pagerSelector:null,buildPager:null,pagerCustom:null,controls:true,nextText:"Next",prevText:"Prev",nextSelector:null,prevSelector:null,autoControls:false,startText:"Start",stopText:"Stop",autoControlsCombine:false,autoControlsSelector:null,auto:false,pause:4e3,autoStart:true,autoDirection:"next",autoHover:false,autoDelay:0,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,onSliderLoad:function(){},onSlideBefore:function(){},onSlideAfter:function(){},onSlideNext:function(){},onSlidePrev:function(){}};e.fn.bxSlider=function(n){if(this.length==0)return;if(this.length>1){this.each(function(){e(this).bxSlider(n)});return this}var r={};var s=this;var o=function(){r.settings=e.extend({},t,n);if(r.settings.captionsSelector){r.modCaptions={selectors:r.settings.captionsSelector,attrs:r.settings.captionsAttr,storage:[],hack:function(t){e.each(r.modCaptions.storage[t],function(t,n){e(t).html(n)})}}}r.children=s.children(r.settings.slideSelector);r.active={index:r.settings.startSlide};r.carousel=r.settings.minSlides>1||r.settings.maxSlides>1;r.minThreshold=r.settings.minSlides*r.settings.slideWidth+(r.settings.minSlides-1)*r.settings.slideMargin;r.maxThreshold=r.settings.maxSlides*r.settings.slideWidth+(r.settings.maxSlides-1)*r.settings.slideMargin;r.working=false;r.controls={};r.animProp=r.settings.mode=="vertical"?"top":"left";r.usingCSS=r.settings.useCSS&&r.settings.mode!="fade"&&function(){var e=document.createElement("div");var t=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var n in t){if(e.style[t[n]]!==undefined){r.cssPrefix=t[n].replace("Perspective","").toLowerCase();r.animProp="-"+r.cssPrefix+"-transform";return true}}return false}();if(r.settings.mode=="vertical")r.settings.maxSlides=r.settings.minSlides;u()};var u=function(){s.wrap('<div class="bx-wrapper"><div class="bx-viewport"></div></div>');r.viewport=s.parent();r.loader=e('<div class="bx-loading" />');r.viewport.prepend(r.loader);s.css({width:r.settings.mode=="horizontal"?"2800%":"auto",height:0,overflow:"hidden",position:"relative",margin:0,padding:0});if(r.usingCSS&&r.settings.easing){s.css("-"+r.cssPrefix+"-transition-timing-function",r.settings.easing)}else if(!r.settings.easing){r.settings.easing="swing"}r.viewport.css({width:"100%",height:"50",overflow:"hidden",position:"relative"});r.children.css({"float":r.settings.mode=="horizontal"?"left":"none",position:"relative",width:f(),listStyle:"none",marginRight:r.settings.mode=="horizontal"?r.settings.slideMargin:0,marginBottom:r.settings.mode=="vertical"?r.settings.slideMargin:0});if(r.settings.mode=="fade"){r.children.css({position:"absolute",zIndex:0,display:"none"});r.children.eq(r.settings.startSlide).css({zIndex:50,display:"block"})}r.controls.el=e('<div class="bx-controls" />');if(r.settings.captions)b();if(r.settings.captionsSelector){r.modCaptions.hack(0)}if(r.settings.infiniteLoop&&r.settings.mode!="fade"&&!r.settings.ticker){var t=r.settings.mode=="vertical"?r.settings.minSlides:r.settings.maxSlides;var n=r.children.slice(0,t).clone().addClass("bx-clone");var i=r.children.slice(-t).clone().addClass("bx-clone");s.append(n).prepend(i)}r.active.last=r.settings.startSlide==c()-1;if(r.settings.video)s.fitVids();if(!r.settings.ticker){if(r.settings.pager)m();if(r.settings.controls)g();if(r.settings.auto&&r.settings.autoControls)y();if(r.settings.controls||r.settings.autoControls||r.settings.pager)r.viewport.after(r.controls.el)}s.children().imagesLoaded(function(){r.loader.remove();s.css("overflow","visible");p();if(r.settings.mode=="vertical")r.settings.adaptiveHeight=true;r.viewport.animate({height:a()},200,function(){r.settings.onSliderLoad(r.active.index)});if(r.settings.auto&&r.settings.autoStart)A();if(r.settings.ticker)O();if(r.settings.pager)N(r.settings.startSlide);if(r.settings.controls)L();if(r.settings.touchEnabled&&!r.settings.ticker)_()})};var a=function(){var t=0;var n=e();if(r.settings.mode!="vertical"&&!r.settings.adaptiveHeight){n=r.children}else{if(!r.carousel){n=r.children.eq(r.active.index)}else{var s=r.settings.moveSlides==1?r.active.index:r.active.index*h();n=r.children.eq(s);for(i=1;i<=r.settings.maxSlides-1;i++){if(s+i>=r.children.length){n=n.add(r.children.eq(i-1))}else{n=n.add(r.children.eq(s+i))}}}}if(r.settings.mode=="vertical"){n.each(function(n){t+=e(this).outerHeight()});if(r.settings.slideMargin>0){t+=r.settings.slideMargin*(r.settings.minSlides-1)}}else{t=Math.max.apply(Math,n.map(function(){return e(this).outerHeight()}).get())}return t};var f=function(){var e=r.settings.slideWidth;var t=r.viewport.width();if(r.settings.slideWidth==0){e=t}else{if(t>r.maxThreshold){e=(t-r.settings.slideMargin*(r.settings.maxSlides-1))/r.settings.maxSlides}else if(t<r.minThreshold){e=(t-r.settings.slideMargin*(r.settings.minSlides-1))/r.settings.minSlides}}return e};var l=function(){var e=1;if(r.settings.mode=="horizontal"){if(r.viewport.width()<r.minThreshold){e=r.settings.minSlides}else if(r.viewport.width()>r.maxThreshold){e=r.settings.maxSlides}else{var t=r.children.first().width();e=Math.floor(r.viewport.width()/t)}}else if(r.settings.mode=="vertical"){e=r.settings.minSlides}return e};var c=function(){var e=0;if(r.settings.moveSlides>0){if(r.settings.infiniteLoop){e=r.children.length/h()}else{var t=0;var n=0;while(t<r.children.length){++e;t=n+l();n+=r.settings.moveSlides<=l()?r.settings.moveSlides:l()}}}else{e=Math.ceil(r.children.length/l())}return e};var h=function(){if(r.settings.moveSlides>0&&r.settings.moveSlides<=l()){return r.settings.moveSlides}return l()};var p=function(){if(r.active.last){if(r.settings.mode=="horizontal"){var e=r.children.last();var t=e.position();d(-(t.left-(r.viewport.width()-e.width())),"reset",0)}else if(r.settings.mode=="vertical"){var n=r.children.length-r.settings.minSlides;var t=r.children.eq(n).position();d(-t.top,"reset",0)}}else{var t=r.children.eq(r.active.index*h()).position();if(r.active.index==c()-1)r.active.last=true;if(t!=undefined){if(r.settings.mode=="horizontal")d(-t.left,"reset",0);else if(r.settings.mode=="vertical")d(-t.top,"reset",0)}}};var d=function(e,t,n,i){if(r.usingCSS){var o=r.settings.mode=="vertical"?"translate3d(0, "+e+"px, 0)":"translate3d("+e+"px, 0, 0)";s.css("-"+r.cssPrefix+"-transition-duration",n/1e3+"s");if(t=="slide"){s.css(r.animProp,o);s.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){s.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd");C()})}else if(t=="reset"){s.css(r.animProp,o)}else if(t=="ticker"){s.css("-"+r.cssPrefix+"-transition-timing-function","linear");s.css(r.animProp,o);s.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){s.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd");d(i["resetValue"],"reset",0);M()})}}else{var u={};u[r.animProp]=e;if(t=="slide"){s.animate(u,n,r.settings.easing,function(){C()})}else if(t=="reset"){s.css(r.animProp,e)}else if(t=="ticker"){s.animate(u,speed,"linear",function(){d(i["resetValue"],"reset",0);M()})}}};var v=function(){var t="";pagerQty=c();for(var n=0;n<pagerQty;n++){var i="";if(r.settings.buildPager&&e.isFunction(r.settings.buildPager)){i=r.settings.buildPager(n);r.pagerEl.addClass("bx-custom-pager")}else{i=n+1;r.pagerEl.addClass("bx-default-pager")}t+='<div class="bx-pager-item"><a href="" data-slide-index="'+n+'" class="bx-pager-link">'+i+"</a></div>"}r.pagerEl.html(t)};var m=function(){if(!r.settings.pagerCustom){r.pagerEl=e('<div class="bx-pager" />');if(r.settings.pagerSelector){e(r.settings.pagerSelector).html(r.pagerEl)}else{r.controls.el.addClass("bx-has-pager").append(r.pagerEl)}v()}else{r.pagerEl=e(r.settings.pagerCustom)}r.pagerEl.delegate("a","click",T)};var g=function(){r.controls.next=e('<a class="bx-next" href="">'+r.settings.nextText+"</a>");r.controls.prev=e('<a class="bx-prev" href="">'+r.settings.prevText+"</a>");r.controls.next.bind("click",w);r.controls.prev.bind("click",E);if(r.settings.nextSelector){e(r.settings.nextSelector).append(r.controls.next)}if(r.settings.prevSelector){e(r.settings.prevSelector).append(r.controls.prev)}if(!r.settings.nextSelector&&!r.settings.prevSelector){r.controls.directionEl=e('<div class="bx-controls-direction" />');r.controls.directionEl.append(r.controls.prev).append(r.controls.next);r.controls.el.addClass("bx-has-controls-direction").append(r.controls.directionEl)}};var y=function(){r.controls.start=e('<div class="bx-controls-auto-item"><a class="bx-start" href="">'+r.settings.startText+"</a></div>");r.controls.stop=e('<div class="bx-controls-auto-item"><a class="bx-stop" href="">'+r.settings.stopText+"</a></div>");r.controls.autoEl=e('<div class="bx-controls-auto" />');r.controls.autoEl.delegate(".bx-start","click",S);r.controls.autoEl.delegate(".bx-stop","click",x);if(r.settings.autoControlsCombine){r.controls.autoEl.append(r.controls.start)}else{r.controls.autoEl.append(r.controls.start).append(r.controls.stop)}if(r.settings.autoControlsSelector){e(r.settings.autoControlsSelector).html(r.controls.autoEl)}else{r.controls.el.addClass("bx-has-controls-auto").append(r.controls.autoEl)}k(r.settings.autoStart?"stop":"start")};var b=function(){r.children.each(function(t){if(r.settings.captionsSelector){var n=r.modCaptions.selectors.split(","),i=r.modCaptions.attrs.split(","),s={},o=e(this);e.each(n,function(t,n){s[e.trim(n)]=o.find("img:first").attr(e.trim(i[t]))});r.modCaptions.storage[t]=s}else{var u=e(this).find("img:first").attr("title");if(u!=undefined)e(this).append('<div class="bx-caption"><span>'+u+"</span></div>")}})};var w=function(e){if(r.settings.auto)s.stopAuto();s.goToNextSlide();e.preventDefault()};var E=function(e){if(r.settings.auto)s.stopAuto();s.goToPrevSlide();e.preventDefault()};var S=function(e){s.startAuto();e.preventDefault()};var x=function(e){s.stopAuto();e.preventDefault()};var T=function(t){if(r.settings.auto)s.stopAuto();var n=e(t.currentTarget);var i=parseInt(n.attr("data-slide-index"));if(i!=r.active.index)s.goToSlide(i);t.preventDefault()};var N=function(e){if(r.settings.pagerType=="short"){r.pagerEl.html(e+1+r.settings.pagerShortSeparator+r.children.length);return}r.pagerEl.find("a").removeClass("active");r.pagerEl.find("a").eq(e).addClass("active")};var C=function(){if(r.settings.infiniteLoop){var e="";if(r.active.index==0){e=r.children.eq(0).position()}else if(r.active.index==c()-1&&r.carousel){e=r.children.eq((c()-1)*h()).position()}else if(r.active.index==r.children.length-1){e=r.children.eq(r.children.length-1).position()}if(r.settings.mode=="horizontal"){d(-e.left,"reset",0);}else if(r.settings.mode=="vertical"){d(-e.top,"reset",0);}}r.working=false;r.settings.onSlideAfter(r.children.eq(r.active.index),r.oldIndex,r.active.index)};var k=function(e){if(r.settings.autoControlsCombine){r.controls.autoEl.html(r.controls[e])}else{r.controls.autoEl.find("a").removeClass("active");r.controls.autoEl.find("a:not(.bx-"+e+")").addClass("active")}};var L=function(){if(!r.settings.infiniteLoop&&r.settings.hideControlOnEnd){if(r.active.index==0){r.controls.prev.addClass("disabled");r.controls.next.removeClass("disabled")}else if(r.active.index==c()-1){r.controls.next.addClass("disabled");r.controls.prev.removeClass("disabled")}else{r.controls.prev.removeClass("disabled");r.controls.next.removeClass("disabled")}}};var A=function(){if(r.settings.autoDelay>0){var e=setTimeout(s.startAuto,r.settings.autoDelay)}else{s.startAuto()}if(r.settings.autoHover){s.hover(function(){if(r.interval){s.stopAuto(true);r.autoPaused=true}},function(){if(r.autoPaused){s.startAuto(true);r.autoPaused=null}})}};var O=function(){var t=0;if(r.settings.autoDirection=="next"){s.append(r.children.clone().addClass("bx-clone"))}else{s.prepend(r.children.clone().addClass("bx-clone"));var n=r.children.first().position();t=r.settings.mode=="horizontal"?-n.left:-n.top}d(t,"reset",0);r.settings.pager=false;r.settings.controls=false;r.settings.autoControls=false;if(r.settings.tickerHover&&!r.usingCSS){r.viewport.hover(function(){s.stop()},function(){var t=0;r.children.each(function(n){t+=r.settings.mode=="horizontal"?e(this).outerWidth(true):e(this).outerHeight(true)});var n=r.settings.speed/t;var i=r.settings.mode=="horizontal"?"left":"top";var o=n*(t-Math.abs(parseInt(s.css(i))));M(o)})}M()};var M=function(e){speed=e?e:r.settings.speed;var t={left:0,top:0};var n={left:0,top:0};if(r.settings.autoDirection=="next"){t=s.find(".bx-clone").first().position()}else{n=r.children.first().position()}var i=r.settings.mode=="horizontal"?-t.left:-t.top;var o=r.settings.mode=="horizontal"?-n.left:-n.top;var u={resetValue:o};d(i,"ticker",speed,u)};var _=function(){r.touch={start:{x:0,y:0},end:{x:0,y:0}};r.viewport.bind("touchstart",D)};var D=function(e){if(r.working){e.preventDefault()}else{r.touch.originalPos=s.position();var t=e.originalEvent;r.touch.start.x=t.changedTouches[0].pageX;r.touch.start.y=t.changedTouches[0].pageY;r.viewport.bind("touchmove",P);r.viewport.bind("touchend",H)}};var P=function(e){e.preventDefault();if(r.settings.mode!="fade"){var t=e.originalEvent;var n=0;if(r.settings.mode=="horizontal"){var i=t.changedTouches[0].pageX-r.touch.start.x;n=r.touch.originalPos.left+i}else{var i=t.changedTouches[0].pageY-r.touch.start.y;n=r.touch.originalPos.top+i}d(n,"reset",0)}};var H=function(e){r.viewport.unbind("touchmove",P);var t=e.originalEvent;var n=0;r.touch.end.x=t.changedTouches[0].pageX;r.touch.end.y=t.changedTouches[0].pageY;if(r.settings.mode=="fade"){var i=Math.abs(r.touch.start.x-r.touch.end.x);if(i>=r.settings.swipeThreshold){r.touch.start.x>r.touch.end.x?s.goToNextSlide():s.goToPrevSlide();s.stopAuto()}}else{var i=0;if(r.settings.mode=="horizontal"){i=r.touch.end.x-r.touch.start.x;n=r.touch.originalPos.left}else{i=r.touch.end.y-r.touch.start.y;n=r.touch.originalPos.top}if(!r.settings.infiniteLoop&&(r.active.index==0&&i>0||r.active.last&&i<0)){d(n,"reset",200)}else{if(Math.abs(i)>=r.settings.swipeThreshold){i<0?s.goToNextSlide():s.goToPrevSlide();s.stopAuto()}else{d(n,"reset",200)}}}r.viewport.unbind("touchend",H)};s.goToSlide=function(t,n){if(r.working||r.active.index==t)return;r.working=true;r.oldIndex=r.active.index;if(t<0){r.active.index=c()-1}else if(t>=c()){r.active.index=0}else{r.active.index=t}r.settings.onSlideBefore(r.children.eq(r.active.index),r.oldIndex,r.active.index);if(r.settings.captionsSelector){r.modCaptions.hack(r.active.index)}if(n=="next"){r.settings.onSlideNext(r.children.eq(r.active.index),r.oldIndex,r.active.index)}else if(n=="prev"){r.settings.onSlidePrev(r.children.eq(r.active.index),r.oldIndex,r.active.index)}r.active.last=r.active.index>=c()-1;if(r.settings.pager)N(r.active.index);if(r.settings.controls)L();if(r.settings.mode=="fade"){if(r.settings.adaptiveHeight&&r.viewport.height()!=a()){r.viewport.animate({height:a()},r.settings.adaptiveHeightSpeed)}r.children.filter(":visible").fadeOut(r.settings.speed).css({zIndex:0});r.children.eq(r.active.index).css("zIndex",51).fadeIn(r.settings.speed,function(){e(this).css("zIndex",50);C()})}else{if(r.settings.adaptiveHeight&&r.viewport.height()!=a()){r.viewport.animate({height:a()},r.settings.adaptiveHeightSpeed)}var i=0;var o={left:0,top:0};if(!r.settings.infiniteLoop&&r.carousel&&r.active.last){if(r.settings.mode=="horizontal"){var u=r.children.eq(r.children.length-1);o=u.position();i=r.viewport.width()-u.width()}else{var f=r.children.length-r.settings.minSlides;o=r.children.eq(f).position()}}else if(r.carousel&&r.active.last&&n=="prev"){var l=r.settings.moveSlides==1?r.settings.maxSlides-h():(c()-1)*h()-(r.children.length-r.settings.maxSlides);var u=s.children(".bx-clone").eq(l);o=u.position()}else if(n=="next"&&r.active.index==0){o=s.find(".bx-clone").eq(r.settings.maxSlides).position();r.active.last=false}else if(t>=0){var p=t*h();o=r.children.eq(p).position()}var v=r.settings.mode=="horizontal"?-(o.left-i):-o.top;d(v,"slide",r.settings.speed)}};s.goToNextSlide=function(){if(!r.settings.infiniteLoop&&r.active.last)return;var e=r.active.index+1;s.goToSlide(e,"next")};s.goToPrevSlide=function(){if(!r.settings.infiniteLoop&&r.active.index==0)return;var e=r.active.index-1;s.goToSlide(e,"prev")};s.startAuto=function(e){if(r.interval)return;r.interval=setInterval(function(){r.settings.autoDirection=="next"?s.goToNextSlide():s.goToPrevSlide()},r.settings.pause);if(r.settings.autoControls&&e!=true)k("stop")};s.stopAuto=function(e){if(!r.interval)return;clearInterval(r.interval);r.interval=null;if(r.settings.autoControls&&e!=true)k("start")};s.getCurrentSlide=function(){return r.active.index};s.getSlideCount=function(){return r.children.length};var B=e(window).width();var j=e(window).height();e(window).resize(function(){var t=e(window).width();var n=e(window).height();if(B!=t||j!=n){B=t;j=n;r.children.add(s.find(".bx-clone")).width(f());r.viewport.css("height",a());if(r.active.last)r.active.index=c()-1;if(r.active.index>=c())r.active.last=true;if(r.settings.pager&&!r.settings.pagerCustom){v();N(r.active.index)}if(!r.settings.ticker)p()}});o();return this}})(jQuery);(function(e,t){var n="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";e.fn.imagesLoaded=function(r){function i(){var t=e(p),n=e(d);u&&(d.length?u.reject(f,t,n):u.resolve(f));e.isFunction(r)&&r.call(o,f,t,n)}function s(t,r){t.src===n||-1!==e.inArray(t,h)||(h.push(t),r?d.push(t):p.push(t),e.data(t,"imagesLoaded",{isBroken:r,src:t.src}),a&&u.notifyWith(e(t),[r,f,e(p),e(d)]),f.length===h.length&&(setTimeout(i),f.unbind(".imagesLoaded")))}var o=this,u=e.isFunction(e.Deferred)?e.Deferred():0,a=e.isFunction(u.notify),f=o.find("img").add(o.filter("img")),h=[],p=[],d=[];e.isPlainObject(r)&&e.each(r,function(e,t){if("callback"===e)r=t;else if(u)u[e](t)});f.length?f.bind("load.imagesLoaded error.imagesLoaded",function(e){s(e.target,"error"===e.type)}).each(function(r,i){var o=i.src,u=e.data(i,"imagesLoaded");if(u&&u.src===o)s(i,u.isBroken);else if(i.complete&&i.naturalWidth!==t)s(i,0===i.naturalWidth||0===i.naturalHeight);else if(i.readyState||i.complete)i.src=n,i.src=o}):i();return u?u.promise(o):o}})(jQuery)
